---
title: "Google Maps Saved Places"
output:
  html_document:
    toc: true
    includes:
      in_header: header/header.html
      after_body: include_footer.html
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, message = FALSE, warning = FALSE)
```

This page embeds my Google My Maps layer and shows the latest exported CSV data from the repo.

## Saved Places

```{=html}
<iframe
  src="https://www.google.com/maps/d/embed?mid=1aSjDN50VR8qKu40GyIE2UsF6C8WzhGU&ehbc=2E312F"
  width="100%"
  height="650"
  style="border:0;"
  loading="lazy">
</iframe>
```

## Latest CSV Export

```{r exported-data}
want_to_go_path <- here::here("data", "want_to_go.csv")
favorites_path <- here::here("data", "favorites.csv")

datatable_options <- list(
  paging = FALSE,
  dom = "Bfrtip",
  buttons = c("copy", "csv", "excel"),
  scrollY = "400px",
  scrollX = TRUE,
  autoWidth = TRUE
)

cat("### Want to go\n\n")
if (!file.exists(want_to_go_path)) {
  cat("`data/want_to_go.csv` not found.\n\n")
} else {
  readr::read_csv(want_to_go_path, show_col_types = FALSE) |>
    DT::datatable(
      filter = "top",
      extensions = "Buttons",
      options = datatable_options,
      width = "100%",
      rownames = FALSE
    )
}

cat("\n\n### Favorites\n\n")
if (!file.exists(favorites_path)) {
  cat("`data/favorites.csv` not found.\n\n")
} else {
  readr::read_csv(favorites_path, show_col_types = FALSE) |>
    DT::datatable(
      filter = "top",
      extensions = "Buttons",
      options = datatable_options,
      width = "100%",
      rownames = FALSE
    )
}
```

## Setup Notes

- Add repo secret `MYMAPS_MID` with your My Maps `mid`.
- The weekly workflow updates these files:
  - `data/saved_places.kml`
  - `data/saved_places.csv`
